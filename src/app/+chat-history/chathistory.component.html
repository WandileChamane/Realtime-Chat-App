<div *ngIf="theuser">
  <div class="container-fluid">
    <div style="height: 100vh" >
    <div #chatdiv  class = "chat_list">
      <div *ngFor="let message of messages" class="row" >

        <div *ngIf="theSender.name == message.authorName " class="panel-body pull-right ">
          <div *ngIf="message.doc != null "   >

              <div  *ngIf = " message.fileMimeType != 'image/jpeg' && message.fileMimeType != 'image/png'" style="border-radius: 10px; background-color: #DDDDDD; padding: 20px">
                <a style="border:2px ; background-color: #DCF8C6;   padding: 15px; color: black ;  " download="message.fileName" [href]="message.fileURL" target="_blank">{{message.fileName}}</a>
              </div>
              <div *ngIf = "message.fileMimeType == 'image/jpeg' || message.fileMimeType == 'image/png'" >
                <img data-toggle="modal" data-target="#myModal1" (click)="setModalImage(message.fileURL)" style=" cursor:pointer; border:2px ; background-color: #DCF8C6;   padding: 15px; color: black ; width: 20%; height: 20% " (click)="imageDownload(message.doc)" [src]="message.fileURL" class="pull-right" >
              </div>

          </div>

          <div style="border:2px ; background-color: #DDDDDD;   padding: 15px; border-radius: 10px; color: #77846D " *ngIf="message.message != null"  >
            {{ message.message }}
          </div>
        </div>

        <div *ngIf="theSender.name == message.receiverName " class="panel-body pull-left"  >
          <div *ngIf="message.doc != null "   >

              <div  *ngIf = "message.fileMimeType != 'image/jpeg' && message.fileMimeType != 'image/png'" style="border-radius: 10px;background-color: #DDDDDD; padding: 20px">
                <a style="border:2px ; background-color: #DCF8C6;   padding: 15px; color: black " download="message.doc.name" [href]="message.doc.url" target="_blank">{{message.doc.name}}</a>
              </div>
              <div  *ngIf = "message.fileMimeType == 'image/jpeg' || message.fileMimeType == 'image/png'">
                <img data-toggle="modal" data-target="#myModal1" (click)="setModalImage(message.fileURL)" style="cursor:pointer; border:2px ; background-color: #DCF8C6;   padding: 15px; color: black ; width: 20%; height: 20% " [src]="message.fileURL" class="pull-left">
              </div>

          </div>



          <div style="border:2px ;border-radius: 10px; background-color: #DDDDDD;   padding: 15px; color: #77846D " *ngIf="message.message != null"  >
            {{ message.message }}
          </div>
        </div>

      </div>
    </div>

    <div id="myModal1" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
            <img id="modal-image" [src]="modalImage" class="img-responsive">
          </div>
        </div>
      </div>
    </div>



  <div class="row" style="height: 30vh">

    <div class="form-group">
      <form #form="ngForm" >
        <div>
          <input  type="text" [(ngModel)]="user.message" class="form-control" (keyup.enter) = "onEnter()"  name="message" required>
        </div>
        <div class="row">
          <div class="col-xs-5">
            <button class="btn btn-info" type="button" (click)="onSubmit()">Send</button>
          </div>
          <div class="col-xs-5">
            <input  type="file"  (change) ="uploadFiles($event)">
          </div>
        </div>
      </form>
    </div>
  </div>

  </div>

</div>
</div>
